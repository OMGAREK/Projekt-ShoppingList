<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
 xmlns:views="clr-namespace:ShoppingListAW4E.Views"
 x:Class="ShoppingListAW4E.Views.ShoppingListPage"
 Title="Lista zakupow">

 <ScrollView>
 <VerticalStackLayout Padding="20" Spacing="10">

 <Frame>
 <VerticalStackLayout Spacing="8">
 <Label Text="Dodaj kategorie" FontAttributes="Bold" />
 <Entry x:Name="NewCategoryEntry" Placeholder="Nowa kategoria" />
 <Button Text="Dodaj kategorie" Clicked="OnAddCategoryClicked" />
 </VerticalStackLayout>
 </Frame>

 <Frame>
 <VerticalStackLayout Spacing="8">
 <Label Text="Dodaj produkt" FontAttributes="Bold" />
 <Entry x:Name="NewProductNameEntry" Placeholder="Nazwa produktu" />
 <Entry x:Name="NewProductQuantityEntry" Placeholder="Ilosc" Keyboard="Numeric" />
 <Entry x:Name="NewProductUnitEntry" Placeholder="Jednostka" />
 <Picker x:Name="CategoryPicker" Title="Kategoria" ItemDisplayBinding="{Binding Name}" />
 <Button Text="Dodaj produkt" Clicked="OnAddProductClicked" />
 </VerticalStackLayout>
 </Frame>

 <CollectionView x:Name="CategoryCollectionView" ItemsSource="{Binding}">
 <CollectionView.ItemTemplate>
 <DataTemplate>
 <VerticalStackLayout Padding="12">
 <HorizontalStackLayout Spacing="8" VerticalOptions="Center">
 <Button Text="{Binding Name}"
 Clicked="OnCategoryClicked"
 HorizontalOptions="StartAndExpand"
 VerticalOptions="Center" />

 <Button Text="Usun"
 TextColor="Red"
 Clicked="OnRemoveCategoryClicked"
 HorizontalOptions="End"
 VerticalOptions="Center"
 Padding="4,0" />
 </HorizontalStackLayout>

 <CollectionView ItemsSource="{Binding Products}"
 IsVisible="{Binding IsExpanded}">
 <CollectionView.ItemTemplate>

 <DataTemplate>
 <views:ProductView />
 </DataTemplate>

 </CollectionView.ItemTemplate>
 </CollectionView>
 </VerticalStackLayout>
 </DataTemplate>
 </CollectionView.ItemTemplate>
 </CollectionView>

 </VerticalStackLayout>
 </ScrollView>
</ContentPage>