using System.ComponentModel;
using System.Runtime.CompilerServices;

namespace ShoppingListAW4E.Models
{
    // KLASA: Product
    // Reprezentuje jeden produkt na liście zakupów (np. "Jabłka").
    // Poniżej dodajemy komentarze opisujące każdą część klasy tak, aby osoba
    // bez doświadczenia programistycznego zrozumiała jak to działa.
    public class Product : INotifyPropertyChanged
    {
        // Prywatne pole przechowujące ilość produktu.
        int quantity;
        // Prywatne pole przechowujące informację czy produkt został kupiony.
        bool isBought;

        // NAZWA PRODUKTU
        // - To zwykłe pole tekstowe, które mówi co to za produkt.
        public string Name { get; set; }
        // JEDNOSTKA (np. "kg" lub "szt")
        public string Unit { get; set; }
        // NAZWA KATEGORII - tekstowa informacja do której kategorii należy produkt.
        public string CategoryName { get; set; }

        // ILOŚĆ: właściwość z mechanizmem powiadamiania o zmianie
        // - get zwraca aktualną ilość
        // - set zapisuje nową ilość i powiadamia interfejs, by zaktualizować widok
        public int Quantity
        {
            get => quantity; // zwróć obecny stan
            set
            {
                quantity = value; // ustaw nową ilość
                OnPropertyChanged(); // powiadom o zmianie
            }
        }

        // FLAGA: informacja, czy produkt został już kupiony
        // - Po zmianie tej wartości wywołujemy OnPropertyChanged, aby UI mógł się odświeżyć.
        public bool IsBought
        {
            get => isBought; // zwróć aktualny stan (kupione/niekupione)
            set
            {
                isBought = value; // zapisz nowy stan
                OnPropertyChanged(); // powiadom o zmianie
            }
        }

        // WYDARZENIE: powiadomienie o zmianie właściwości
        // - Inne obiekty (np. UI) mogą "subskrybować" to wydarzenie i być informowane
        // gdy właściwości tego obiektu się zmienią.
        public event PropertyChangedEventHandler PropertyChanged;

        // METODA: OnPropertyChanged
        // - Wywołujemy tę metodę, aby powiadomić system, że jakaś właściwość się zmieniła.
        // - Dzięki [CallerMemberName] nie musimy podawać nazwy właściwości ręcznie.
        void OnPropertyChanged([CallerMemberName] string name = "")
        {
            PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(name));
        }
    }
}